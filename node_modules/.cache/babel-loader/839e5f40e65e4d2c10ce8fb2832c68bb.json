{"ast":null,"code":"import dedent from 'dedent';\nimport { Quill } from 'vue-quill-editor';\nimport { container, ImageExtend, QuillWatch } from 'quill-image-extend-module';\nimport quillEmoji from 'quill-emoji';\nimport 'quill-emoji/dist/quill-emoji.css';\nimport axios from 'axios';\nimport { onMounted, reactive, ref } from 'vue';\nimport { ElMessage } from 'element-plus';\nexport default {\n  name: 'ProjectPlan',\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    /* eslint-disable */\n\n    const dialogFormVisible = ref(false);\n    const formLabelWidth = '140px';\n    const projectPlanList = reactive([]);\n    const projectPlanForm = reactive({\n      bu: '',\n      developer: '',\n      dependTask: '',\n      workHour: '',\n      plan: '',\n      releaseOrder: '',\n      comments: ''\n    });\n\n    const fetchProjectPlanList = async function () {\n      projectPlanList.splice(0, projectPlanList.length);\n      const result = await axios.get('/api/project/plan/list', {});\n\n      for (let index in result.data) {\n        projectPlanList.push(result.data[index]);\n      } // projectList = result.data;\n\n    };\n\n    const createProjectPlan = async function () {\n      const res = await axios.post('/api/project/createProjectPlan', projectPlanForm);\n\n      if (res.status == 200) {\n        ElMessage({\n          message: '创建成功',\n          type: 'success'\n        });\n        dialogFormVisible.value = false;\n        fetchProjectPlanList();\n      }\n    };\n\n    const initFormData = function () {\n      this.projectForm.projectName = '';\n      this.projectForm.proposer = '';\n      this.projectForm.checker = '';\n      this.projectForm.pm = '';\n      this.projectForm.status = '';\n    };\n\n    onMounted(fetchProjectPlanList);\n    const editorOption = reactive({\n      content: dedent`<p><span class=\"ql-emojiblot\" data-name=\"grinning\">ï»¿<span contenteditable=\"false\"><span class=\"ap ap-grinning\">ð</span></span>ï»¿</span></p><p><br></p><p><em>Register </em><a href=\"https://github.com/contentco/quill-emoji\" rel=\"noopener noreferrer\" target=\"_blank\"><em>Quill emoji module</em></a></p><p><br></p><p><em>Register </em><a href=\"https://github.com/NextBoy/quill-image-extend-module\" rel=\"noopener noreferrer\" target=\"_blank\"><em>Quill image extend module</em></a></p>`,\n      theme: 'snow',\n      modules: {\n        \"emoji-toolbar\": true,\n        \"emoji-shortname\": true,\n        toolbar: {\n          container: [['link', 'image', 'emoji']],\n          handlers: {\n            'image': function () {\n              QuillWatch.emit(this.quill.id);\n            }\n          }\n        },\n        ImageExtend: {\n          loading: true,\n          name: 'img',\n          action: 'https://github.surmon.me/images/',\n          response: res => {\n            return testImageUrl;\n          }\n        }\n      }\n    });\n    const __returned__ = {\n      dialogFormVisible,\n      formLabelWidth,\n      projectPlanList,\n      projectPlanForm,\n      fetchProjectPlanList,\n      createProjectPlan,\n      initFormData,\n      editorOption,\n      dedent,\n      Quill,\n      container,\n      ImageExtend,\n      QuillWatch,\n      quillEmoji,\n      axios,\n      onMounted,\n      reactive,\n      ref,\n      ElMessage\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AA4EA,OAAOA,MAAP,MAAmB,QAAnB;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,SAASC,SAAT,EAAoBC,WAApB,EAAiCC,UAAjC,QAAmD,2BAAnD;AACA,OAAOC,UAAP,MAAuB,aAAvB;AACA,OAAO,kCAAP;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAR,EAAmBC,QAAnB,EAA6BC,GAA7B,QAAuC,KAAvC;AACA,SAASC,SAAT,QAA0B,cAA1B;;;;;;;;IATA;;IAWA,MAAMC,iBAAiB,GAAGF,GAAG,CAAC,KAAD,CAA7B;IACA,MAAMG,cAAc,GAAG,OAAvB;IAEA,MAAMC,eAAe,GAAGL,QAAQ,CAAC,EAAD,CAAhC;IACA,MAAMM,eAAe,GAAGN,QAAQ,CAAC;MAC/BO,EAAE,EAAE,EAD2B;MAE/BC,SAAS,EAAC,EAFqB;MAG/BC,UAAU,EAAE,EAHmB;MAI/BC,QAAQ,EAAE,EAJqB;MAK/BC,IAAI,EAAE,EALyB;MAM/BC,YAAY,EAAE,EANiB;MAO/BC,QAAQ,EAAE;IAPqB,CAAD,CAAhC;;IAUA,MAAMC,oBAAoB,GAAG,kBAAiB;MAC5CT,eAAe,CAACU,MAAhB,CAAuB,CAAvB,EAAyBV,eAAe,CAACW,MAAzC;MACA,MAAMC,MAAM,GAAG,MAAMnB,KAAK,CAACoB,GAAN,CAAU,wBAAV,EAAmC,EAAnC,CAArB;;MACA,KAAI,IAAIC,KAAR,IAAiBF,MAAM,CAACG,IAAxB,EAA6B;QAC3Bf,eAAe,CAACgB,IAAhB,CAAqBJ,MAAM,CAACG,IAAP,CAAYD,KAAZ,CAArB;MACD,CAL2C,CAM5C;;IACD,CAPD;;IAQA,MAAMG,iBAAiB,GAAG,kBAAgB;MACxC,MAAMC,GAAG,GAAG,MAAMzB,KAAK,CAAC0B,IAAN,CAAW,gCAAX,EAA4ClB,eAA5C,CAAlB;;MACA,IAAGiB,GAAG,CAACE,MAAJ,IAAc,GAAjB,EAAqB;QACnBvB,SAAS,CAAC;UACRwB,OAAO,EAAE,MADD;UAERC,IAAI,EAAE;QAFE,CAAD,CAAT;QAIAxB,iBAAiB,CAACyB,KAAlB,GAA0B,KAA1B;QACAd,oBAAoB;MACrB;IACF,CAVD;;IAYA,MAAMe,YAAY,GAAG,YAAU;MAC7B,KAAKC,WAAL,CAAiBC,WAAjB,GAA+B,EAA/B;MACA,KAAKD,WAAL,CAAiBE,QAAjB,GAA4B,EAA5B;MACA,KAAKF,WAAL,CAAiBG,OAAjB,GAA2B,EAA3B;MACA,KAAKH,WAAL,CAAiBI,EAAjB,GAAsB,EAAtB;MACA,KAAKJ,WAAL,CAAiBL,MAAjB,GAA0B,EAA1B;IACD,CAND;;IAOA1B,SAAS,CACLe,oBADK,CAAT;IAMA,MAAMqB,YAAY,GAAGnC,QAAQ,CAAC;MAC5BoC,OAAO,EAAE5C,MAAO,seADY;MAE5B6C,KAAK,EAAE,MAFqB;MAG5BC,OAAO,EAAE;QACP,iBAAiB,IADV;QAEP,mBAAmB,IAFZ;QAGPC,OAAO,EAAE;UACP7C,SAAS,EAAE,CACT,CAAC,MAAD,EAAS,OAAT,EAAkB,OAAlB,CADS,CADJ;UAIP8C,QAAQ,EAAE;YACR,SAAS,YAAY;cACnB5C,UAAU,CAAC6C,IAAX,CAAgB,KAAKC,KAAL,CAAWC,EAA3B;YACD;UAHO;QAJH,CAHF;QAaPhD,WAAW,EAAE;UACXiD,OAAO,EAAE,IADE;UAEPC,IAAI,EAAE,KAFC;UAGPC,MAAM,EAAE,kCAHD;UAIPC,QAAQ,EAAGxB,GAAD,IAAS;YACrB,OAAOyB,YAAP;UACD;QANU;MAbN;IAHmB,CAAD,CAA7B","names":["dedent","Quill","container","ImageExtend","QuillWatch","quillEmoji","axios","onMounted","reactive","ref","ElMessage","dialogFormVisible","formLabelWidth","projectPlanList","projectPlanForm","bu","developer","dependTask","workHour","plan","releaseOrder","comments","fetchProjectPlanList","splice","length","result","get","index","data","push","createProjectPlan","res","post","status","message","type","value","initFormData","projectForm","projectName","proposer","checker","pm","editorOption","content","theme","modules","toolbar","handlers","emit","quill","id","loading","name","action","response","testImageUrl"],"sources":["/Users/licheng/Documents/untitled/src/components/views/ProjectPlan.vue"],"sourcesContent":["<template>\n  <el-breadcrumb :separator-icon=\"ArrowRight\">\n    <el-breadcrumb-item :to=\"{ path: '/projectList' }\">项目&需求</el-breadcrumb-item>\n    <el-breadcrumb-item>排期</el-breadcrumb-item>\n  </el-breadcrumb>\n  <el-row>\n    <el-col :span=\"24\">\n      需求/项目：xxxxxxx&nbsp;&nbsp;验收人：xxxxxxx&nbsp;&nbsp;项目对接人：xxxx&nbsp;&nbsp;状态：xxxx\n    </el-col>\n  </el-row>\n  <el-row>\n    <el-col :span=\"4\">\n      <el-button type=\"primary\" @click=\"dialogFormVisible = true\">创建排期</el-button>\n    </el-col>\n  </el-row>\n  <el-table :data=\"projectPlanList\" style=\"width: 100%\">\n    <el-table-column fixed prop=\"bu\" label=\"业务中心\"/>\n    <el-table-column prop=\"developer\" label=\"开发/测试人员\"  />\n    <el-table-column prop=\"dependTask\" label=\"依赖/被依赖事项\" />\n    <el-table-column prop=\"workHour\" label=\"工时\" />\n    <el-table-column prop=\"plan\" label=\"排期\" />\n    <el-table-column prop=\"releaseOrder\" label=\"发布顺序\"/>\n    <el-table-column prop=\"comments\" label=\"进展/风险备注\"/>\n    <el-table-column fixed=\"right\" label=\"操作\">\n      <template #default>\n        <el-button link size=\"small\" @click=\"()=>{this.$router.push('projectPlan')}\">编辑排期</el-button>\n        <el-button text size=\"small\">删除排期</el-button>\n      </template>\n    </el-table-column>\n  </el-table>\n  <el-row>\n    <el-col :span=\"24\">\n    </el-col>\n  </el-row>\n  <el-dialog v-model=\"dialogFormVisible\" title=\"创建排期\">\n    <el-form :model=\"projectPlanForm\">\n      <el-form-item label=\"业务团队\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"projectPlanForm.bu\" autocomplete=\"off\"/>\n      </el-form-item>\n      <el-form-item label=\"开发/测试人员\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"projectPlanForm.developer\" autocomplete=\"off\"/>\n      </el-form-item>\n      <el-form-item label=\"依赖/被依赖事项\" :label-width=\"formLabelWidth\">\n          <quill-editor\n              class=\"editor\"\n              v-model=\"content\"\n              :options=\"editorOption\"\n          />\n        <el-input v-model=\"projectPlanForm.dependTask\" autocomplete=\"off\" :rows=\"3\" type=\"textarea\" />\n      </el-form-item>\n      <el-form-item label=\"工时\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"projectPlanForm.workHour\" autocomplete=\"off\" :rows=\"2\" type=\"textarea\"/>\n      </el-form-item>\n      <el-form-item label=\"排期\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"projectPlanForm.plan\" autocomplete=\"off\" :rows=\"2\" type=\"textarea\"/>\n      </el-form-item>\n      <el-form-item label=\"发布顺序\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"projectPlanForm.releaseOrder\" autocomplete=\"off\" :rows=\"2\" type=\"textarea\"/>\n      </el-form-item>\n      <el-form-item label=\"进展/风险备注\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"projectPlanForm.comments\" autocomplete=\"off\" :rows=\"2\" type=\"textarea\"/>\n      </el-form-item>\n    </el-form>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"createProjectPlan\"\n        >确认</el-button\n        >\n      </span>\n    </template>\n  </el-dialog>\n</template>\n\n<script setup>\n/* eslint-disable */\nimport dedent from 'dedent'\nimport { Quill } from 'vue-quill-editor'\nimport { container, ImageExtend, QuillWatch } from 'quill-image-extend-module'\nimport quillEmoji from 'quill-emoji'\nimport 'quill-emoji/dist/quill-emoji.css'\n\nimport axios from 'axios'\nimport {onMounted, reactive, ref} from 'vue'\nimport { ElMessage } from 'element-plus'\n\nconst dialogFormVisible = ref(false)\nconst formLabelWidth = '140px'\n\nconst projectPlanList = reactive([])\nconst projectPlanForm = reactive({\n  bu: '',\n  developer:'',\n  dependTask: '',\n  workHour: '',\n  plan: '',\n  releaseOrder: '',\n  comments: ''\n})\n\nconst fetchProjectPlanList = async function (){\n  projectPlanList.splice(0,projectPlanList.length)\n  const result = await axios.get('/api/project/plan/list',{});\n  for(let index in result.data){\n    projectPlanList.push(result.data[index])\n  }\n  // projectList = result.data;\n}\nconst createProjectPlan = async function(){\n  const res = await axios.post('/api/project/createProjectPlan',projectPlanForm);\n  if(res.status == 200){\n    ElMessage({\n      message: '创建成功',\n      type: 'success',\n    })\n    dialogFormVisible.value = false\n    fetchProjectPlanList();\n  }\n}\n\nconst initFormData = function(){\n  this.projectForm.projectName = '';\n  this.projectForm.proposer = '';\n  this.projectForm.checker = '';\n  this.projectForm.pm = '';\n  this.projectForm.status = '';\n}\nonMounted(\n    fetchProjectPlanList\n)\n\n\n\nconst editorOption = reactive({\n  content: dedent`<p><span class=\"ql-emojiblot\" data-name=\"grinning\">ï»¿<span contenteditable=\"false\"><span class=\"ap ap-grinning\">ð</span></span>ï»¿</span></p><p><br></p><p><em>Register </em><a href=\"https://github.com/contentco/quill-emoji\" rel=\"noopener noreferrer\" target=\"_blank\"><em>Quill emoji module</em></a></p><p><br></p><p><em>Register </em><a href=\"https://github.com/NextBoy/quill-image-extend-module\" rel=\"noopener noreferrer\" target=\"_blank\"><em>Quill image extend module</em></a></p>`,\n  theme: 'snow',\n  modules: {\n    \"emoji-toolbar\": true,\n    \"emoji-shortname\": true,\n    toolbar: {\n      container: [\n        ['link', 'image', 'emoji']\n      ],\n      handlers: {\n        'image': function () {\n          QuillWatch.emit(this.quill.id)\n        }\n      }\n    },\n    ImageExtend: {\n      loading: true,\n          name: 'img',\n          action: 'https://github.surmon.me/images/',\n          response: (res) => {\n        return testImageUrl\n      }\n    }\n  }\n})\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n.el-button--text {\n  margin-right: 15px;\n}\n.el-select {\n  width: 300px;\n}\n.el-input {\n  width: 300px;\n}\n.dialog-footer button:first-child {\n  margin-right: 10px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}