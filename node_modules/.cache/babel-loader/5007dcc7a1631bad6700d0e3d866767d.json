{"ast":null,"code":"import axios from 'axios';\nimport { onMounted, reactive, ref } from 'vue';\nimport { ElMessage } from 'element-plus';\nexport default {\n  name: 'ProjectPlan',\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    /* eslint-disable */\n\n    const dialogFormVisible = ref(false);\n    const formLabelWidth = '140px';\n    const projectPlanList = reactive([]);\n    const projectForm = reactive({\n      projectName: '',\n      proposer: '',\n      checker: '',\n      pm: '',\n      status: ''\n    });\n\n    const fetchProjectPlanList = async function () {\n      projectPlanList.splice(0, projectPlanList.length);\n      const result = await axios.get('/api/projectPlan/list', {});\n\n      for (let index in result.data) {\n        projectPlanList.push(result.data[index]);\n      } // projectList = result.data;\n\n    };\n\n    const createProject = async function () {\n      const res = await axios.post('/api/project/create', projectForm);\n\n      if (res.status == 200) {\n        ElMessage({\n          message: '创建成功',\n          type: 'success'\n        });\n        dialogFormVisible.value = false;\n        fetchProjectList();\n      }\n    };\n\n    const initFormData = function () {\n      this.projectForm.projectName = '';\n      this.projectForm.proposer = '';\n      this.projectForm.checker = '';\n      this.projectForm.pm = '';\n      this.projectForm.status = '';\n    };\n\n    onMounted(fetchProjectPlanList);\n    const __returned__ = {\n      dialogFormVisible,\n      formLabelWidth,\n      projectPlanList,\n      projectForm,\n      fetchProjectPlanList,\n      createProject,\n      initFormData,\n      axios,\n      onMounted,\n      reactive,\n      ref,\n      ElMessage\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AA4BA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAR,EAAmBC,QAAnB,EAA6BC,GAA7B,QAAuC,KAAvC;AACA,SAASC,SAAT,QAA0B,cAA1B;;;;;;;;IAHA;;IAKA,MAAMC,iBAAiB,GAAGF,GAAG,CAAC,KAAD,CAA7B;IACA,MAAMG,cAAc,GAAG,OAAvB;IAEA,MAAMC,eAAe,GAAGL,QAAQ,CAAC,EAAD,CAAhC;IACA,MAAMM,WAAW,GAAGN,QAAQ,CAAC;MAC3BO,WAAW,EAAE,EADc;MAE3BC,QAAQ,EAAE,EAFiB;MAG3BC,OAAO,EAAE,EAHkB;MAI3BC,EAAE,EAAE,EAJuB;MAK3BC,MAAM,EAAE;IALmB,CAAD,CAA5B;;IAQA,MAAMC,oBAAoB,GAAG,kBAAiB;MAC5CP,eAAe,CAACQ,MAAhB,CAAuB,CAAvB,EAAyBR,eAAe,CAACS,MAAzC;MACA,MAAMC,MAAM,GAAG,MAAMjB,KAAK,CAACkB,GAAN,CAAU,uBAAV,EAAkC,EAAlC,CAArB;;MACA,KAAI,IAAIC,KAAR,IAAiBF,MAAM,CAACG,IAAxB,EAA6B;QAC3Bb,eAAe,CAACc,IAAhB,CAAqBJ,MAAM,CAACG,IAAP,CAAYD,KAAZ,CAArB;MACD,CAL2C,CAM5C;;IACD,CAPD;;IAQA,MAAMG,aAAa,GAAG,kBAAgB;MACpC,MAAMC,GAAG,GAAG,MAAMvB,KAAK,CAACwB,IAAN,CAAW,qBAAX,EAAiChB,WAAjC,CAAlB;;MACA,IAAGe,GAAG,CAACV,MAAJ,IAAc,GAAjB,EAAqB;QACnBT,SAAS,CAAC;UACRqB,OAAO,EAAE,MADD;UAERC,IAAI,EAAE;QAFE,CAAD,CAAT;QAIArB,iBAAiB,CAACsB,KAAlB,GAA0B,KAA1B;QACAC,gBAAgB;MACjB;IACF,CAVD;;IAYA,MAAMC,YAAY,GAAG,YAAU;MAC7B,KAAKrB,WAAL,CAAiBC,WAAjB,GAA+B,EAA/B;MACA,KAAKD,WAAL,CAAiBE,QAAjB,GAA4B,EAA5B;MACA,KAAKF,WAAL,CAAiBG,OAAjB,GAA2B,EAA3B;MACA,KAAKH,WAAL,CAAiBI,EAAjB,GAAsB,EAAtB;MACA,KAAKJ,WAAL,CAAiBK,MAAjB,GAA0B,EAA1B;IACD,CAND;;IAOAZ,SAAS,CACLa,oBADK,CAAT","names":["axios","onMounted","reactive","ref","ElMessage","dialogFormVisible","formLabelWidth","projectPlanList","projectForm","projectName","proposer","checker","pm","status","fetchProjectPlanList","splice","length","result","get","index","data","push","createProject","res","post","message","type","value","fetchProjectList","initFormData"],"sources":["/Users/licheng/Documents/untitled/src/components/views/ProjectPlan.vue"],"sourcesContent":["<template>\n  <el-row>\n    <el-col :span=\"24\">\n      需求/项目：xxxxxxx&nbsp;&nbsp;验收人：xxxxxxx&nbsp;&nbsp;项目对接人：xxxx&nbsp;&nbsp;状态：xxxx\n    </el-col>\n  </el-row>\n  <el-table :data=\"projectPlanList\" style=\"width: 100%\">\n    <el-table-column fixed prop=\"projectName\" label=\"业务中心\"  />\n    <el-table-column prop=\"dependTask\" label=\"依赖/被依赖事项\"  />\n    <el-table-column prop=\"workHour\" label=\"工时\" />\n    <el-table-column prop=\"Plan\" label=\"排期\" />\n    <el-table-column prop=\"ReleaseOrder\" label=\"发布顺序\"/>\n    <el-table-column prop=\"comments\" label=\"进展/风险备注\"/>\n    <el-table-column fixed=\"right\" label=\"操作\">\n      <template #default>\n        <el-button link size=\"small\" @click=\"()=>{this.$router.push('projectPlan')}\">删除排期</el-button>\n        <el-button text size=\"small\">编辑排期</el-button>\n      </template>\n    </el-table-column>\n  </el-table>\n  <el-row>\n    <el-col :span=\"24\">\n    </el-col>\n  </el-row>\n</template>\n\n<script setup>\n/* eslint-disable */\nimport axios from 'axios'\nimport {onMounted, reactive, ref} from 'vue'\nimport { ElMessage } from 'element-plus'\n\nconst dialogFormVisible = ref(false)\nconst formLabelWidth = '140px'\n\nconst projectPlanList = reactive([])\nconst projectForm = reactive({\n  projectName: '',\n  proposer: '',\n  checker: '',\n  pm: '',\n  status: ''\n})\n\nconst fetchProjectPlanList = async function (){\n  projectPlanList.splice(0,projectPlanList.length)\n  const result = await axios.get('/api/projectPlan/list',{});\n  for(let index in result.data){\n    projectPlanList.push(result.data[index])\n  }\n  // projectList = result.data;\n}\nconst createProject = async function(){\n  const res = await axios.post('/api/project/create',projectForm);\n  if(res.status == 200){\n    ElMessage({\n      message: '创建成功',\n      type: 'success',\n    })\n    dialogFormVisible.value = false\n    fetchProjectList();\n  }\n}\n\nconst initFormData = function(){\n  this.projectForm.projectName = '';\n  this.projectForm.proposer = '';\n  this.projectForm.checker = '';\n  this.projectForm.pm = '';\n  this.projectForm.status = '';\n}\nonMounted(\n    fetchProjectPlanList\n)\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n.el-button--text {\n  margin-right: 15px;\n}\n.el-select {\n  width: 300px;\n}\n.el-input {\n  width: 300px;\n}\n.dialog-footer button:first-child {\n  margin-right: 10px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}